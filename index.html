<!DOCTYPE html>
<html lang="ja" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
    .syutyu {
      color: #2196F3;
    }
    .kyukei {
      color: #FF9800;
    }

    #text {
      font-size: 80px;
    }
    #time {
      font-size: 260px;
    }
    </style>
  </head>
  <body>
    <div id="container">
      <span id="text" class="syutyu">集中</span>
      <span id="time">00:00</span>
    </div>

    <script src="./push.min.js" charset="utf-8"></script>
    <script type="text/javascript">
      Push.create('お帰りなさい');
      const timeElement = document.getElementById('time');
      const textElement = document.getElementById('text');

      let flag = 0; // 集中=0 休憩=1

      let times = prompt('集中:休憩の時間を入力してください。', '25 5');

      let syutyuTime = times.split(' ')[0] * 60;
      let kyukeiTime = times.split(' ')[1] * 60;

      let counter = syutyuTime;

      const countTime = () => {
        counter--;

        if (counter <= 0) {
          alarm();
          if (flag == 0) {
            flag = 1;
            counter = kyukeiTime;

            textElement.textContent = '休憩';
            textElement.classList.remove('syutyu');
            textElement.classList.add('kyukei');
          }
          else {
            flag = 0;
            counter = syutyuTime;

            textElement.textContent = '集中';
            textElement.classList.remove('kyukei');
            textElement.classList.add('syutyu');
          }
        }

        let mm = Math.floor(counter / 60);
        let ss = counter % 60;

        timeElement.innerText = zeroPadding(mm, 2) + ':' + zeroPadding(ss, 2);
      };
      setInterval(countTime, 1000);

      const alarm = () => {
        let text = 'お疲れ様です。休憩してください。';
        if (flag == 1) text = '休憩終了です。頑張りましょう。';

        Push.create(text);
        console.log(text);
      };

      const zeroPadding = (NUM, LEN) => {
      	return ( Array(LEN).join('0') + NUM ).slice( -LEN );
      };
    </script>
  </body>
</html>
